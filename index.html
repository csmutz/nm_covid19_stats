<!DOCTYPE html>
<html lang='en-US'>
<head>
<title>COVID-19 by Zip Codes</title>
</head>
<body>


<!--requires highcarts-->
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/data.js"></script>
<script src="https://code.highcharts.com/modules/series-label.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<figure class="highcharts-figure">
    <div id="container_delta"></div>
</figure>

<figure class="highcharts-figure">
    <div id="container"></div>
</figure>


<script type="text/javascript">
    window.addEventListener('DOMContentLoaded', function (event) {


Highcharts.chart('container_delta', {
    chart: {
        type: 'column'
    },
    title: {
        text: 'New COVID-19 Cases by Zip Code'
    },
    subtitle: {
                text: 'Source: New Mexico Department of Health'
    },

    data: {
        csvURL: 'https://yoursite.com/covid19/covid_delta.csv?' + Date.now(),
        beforeParse: function (csv) {
            return csv.replace(/\n\n/g, '\n');
        }
    },

//    xAxis: {
//        categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
//    },
    xAxis: {
        tickInterval: 7 * 24 * 3600 * 1000, // one week
        tickWidth: 0,
        gridLineWidth: 1,
        labels: {
            align: 'center',
            x: 3,
            y: 10
        }
    },

    yAxis: {
        min: 0,
        title: {
            text: 'New COVID-19 Cases'
        },
        stackLabels: {
            enabled: true,
            style: {
                fontWeight: 'bold',
                color: ( // theme
                    Highcharts.defaultOptions.title.style &&
                    Highcharts.defaultOptions.title.style.color
                ) || 'gray'
            }
        }
    },
/*
    legend: {
        align: 'left',
        x: -30,
        verticalAlign: 'top',
        y: 25,
        floating: true,
        backgroundColor:
            Highcharts.defaultOptions.legend.backgroundColor || 'white',
        borderColor: '#CCC',
        borderWidth: 1,
        shadow: false
    },
*/  
    legend: {
        align: 'left',
        verticalAlign: 'top',
        borderWidth: 0
    },
    tooltip: {
//        headerFormat: '<b>foobar</b><br/>',
        headerFormat: '<b>{point.x:%A, %b %e, %Y}</b><br/>',
//        headerFormat: '<b>{Highcharts.dateFormat('%A, %b %e, %Y', point.x)}</b><br/>',
        pointFormat: '{series.name}: {point.y}<br/>Total: {point.stackTotal}'
    },
    plotOptions: {
        column: {
            stacking: 'normal',
            dataLabels: {
                enabled: true
            }
        }
    }
});


Highcharts.chart('container', {

    chart: {
        scrollablePlotArea: {
            minWidth: 700
        }
    },

    data: {
        csvURL: 'https://yoursite.com/covid19/covid.csv?' + Date.now(),
        beforeParse: function (csv) {
            return csv.replace(/\n\n/g, '\n');
        }
    },

    title: {
        text: 'Total COVID-19 Cases by Zip Code'
    },

    subtitle: {
        text: 'Source: New Mexico Department of Health'
    },

    xAxis: {
        tickInterval: 7 * 24 * 3600 * 1000, // one week
        tickWidth: 0,
        gridLineWidth: 1,
        labels: {
            align: 'center',
            x: 3,
            y: 10
        }
    },

    yAxis: [{ // left y axis
        title: {
            text: 'Total COVID-19 Cases' 
        },
        labels: {
            align: 'right',
            x: -13,
            y: 16,
	    //offset: 20,
            format: '{value:.,0f}'
        },
        showFirstLabel: false
    }
/*
,       
        { // right y axis
        linkedTo: 0,
        gridLineWidth: 0,
        opposite: true,
        title: {
            text: null
        },
        labels: {
            align: 'right',
            x: 13,
            y: 16,
            format: '{value:.,0f}'
        },
        showFirstLabel: false
    }
*/
    ],

    legend: {
        align: 'left',
        verticalAlign: 'top',
        borderWidth: 0
    },

    tooltip: {
        shared: true,
        crosshairs: true
    },

    plotOptions: {
        series: {
            cursor: 'pointer',
            point: {
                events: {
                    click: function (e) {
                        hs.htmlExpand(null, {
                            pageOrigin: {
                                x: e.pageX || e.clientX,
                                y: e.pageY || e.clientY
                            },
                            headingText: this.series.name,
                            maincontentText: Highcharts.dateFormat('%A, %b %e, %Y', this.x) + ':<br/> ' +
                                this.y + ' sessions',
                            width: 200
                        });
                    }
                }
            },
            marker: {
                lineWidth: 1
            }
        }
    }
});

    });
</script>



</body>
</html>

